var Markdown;Markdown="object"===typeof exports&&"function"===typeof require?exports:{};
(function(){function u(m){return m}function G(m){return!1}function E(){}function p(){}E.prototype={chain:function(m,p){var y=this[m];if(!y)throw Error("unknown hook "+m);this[m]=y===u?p:function(m){var k=Array.prototype.slice.call(arguments,0);k[0]=y.apply(null,k);return p.apply(null,k)}},set:function(m,p){if(!this[m])throw Error("unknown hook "+m);this[m]=p},addNoop:function(m){this[m]=u},addFalse:function(m){this[m]=G}};Markdown.HookCollection=E;p.prototype={set:function(m,p){this["s_"+m]=p},get:function(m){return this["s_"+
m]}};Markdown.Converter=function(){function m(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,b,N,d,e,h){b=b.toLowerCase();F.set(b,t(N));if(e)return d;h&&H.set(b,h.replace(/"/g,"&quot;"));return""})}function u(a){a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,y);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,
y);a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,y);a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,y);return a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,y)}function y(a,b){var d;d=b.replace(/^\n+/,"");d=d.replace(/\n+$/g,"");return d="\n\n~K"+(J.push(d)-1)+"K\n\n"}function C(b,e){b=x.preBlockGamut(b,M);b=c(b);b=b.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,"<hr />\n");b=b.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,
"<hr />\n");b=b.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,"<hr />\n");b=g(b);b=a(b);b=d(b);b=x.postBlockGamut(b,M);b=u(b);return b=O(b,e)}function k(a){a=x.preSpanGamut(a);a=b(a);a=B(a);a=a.replace(/\\(\\)/g,K);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,K);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,q);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,q);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,D);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
D);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,D);a=z(a);a=a.replace(/~P/g,"://");a=t(a);a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");a=a.replace(/  +\n/g," <br>\n");return a=x.postSpanGamut(a)}function B(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=
A(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function D(a,b,d,e,h,c,f,g){void 0==g&&(g="");a=d.replace(/:\/\//g,"~P");e=e.toLowerCase();if(""==h)if(""==e&&(e=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=F.get(e))h=F.get(e),void 0!=H.get(e)&&(g=H.get(e));else if(-1<b.search(/\(\s*\)$/m))h="";else return b;h=P(h);h=A(h,"*_");b='<a href="'+h+'"';""!=g&&(g=l(g),g=A(g,"*_"),b+=' title="'+g+'"');return b+(">"+a+"</a>")}function l(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}
function q(a,b,e,d,h,c,f,g){a=e;d=d.toLowerCase();g||(g="");if(""==h)if(""==d&&(d=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=F.get(d))h=F.get(d),void 0!=H.get(d)&&(g=H.get(d));else return b;a=A(l(a),"*_[]()");h=A(h,"*_");b='<img src="'+h+'" alt="'+a+'"';g=l(g);g=A(g,"*_");return b=b+(' title="'+g+'"')+" />"}function c(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+k(b)+"</h1>\n\n"});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+k(b)+"</h2>\n\n"});return a=
a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,d){a=b.length;return"<h"+a+">"+k(d)+"</h"+a+">\n\n"})}function g(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;L?a=a.replace(b,function(a,b,d){a=-1<d.search(/[*+-]/g)?"ul":"ol";b=f(b,a);b=b.replace(/\s+$/,"");return"<"+a+">"+b+"</"+a+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,
d,e){a=-1<e.search(/[*+-]/g)?"ul":"ol";d=f(d,a);return b+"<"+a+">\n"+d+"</"+a+">\n"}));return a=a.replace(/~0/,"")}function f(a,b){L++;a=a.replace(/\n{2,}$/,"\n");var d=Q[b],e=!1;a=(a+"~0").replace(new RegExp("(^[ \\t]*)("+d+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+d+")[ \\t]+))","gm"),function(a,b,d,h){a=h;(b=/\n\n$/.test(a))||-1<a.search(/\n{2,}/)||e?a=C(v(a),!0):(a=g(v(a)),a=a.replace(/\n$/,""),a=k(a));e=b;return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");L--;return a}function a(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(a,b,d){a=e(v(b));a=n(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return"\n\n"+("<pre><code>"+a+"\n</code></pre>")+"\n\n"+d});return a=a.replace(/~0/,"")}function h(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(J.push(a)-1)+"K\n\n"}function b(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,d,h,c){a=h.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=e(a);a=a.replace(/:\/\//g,"~P");return b+"<code>"+a+"</code>"})}function e(a){a=a.replace(/&/g,"&amp;");
a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=A(a,"*_{}[]\\",!1)}function d(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var d;d=b.replace(/^[ \t]*>[ \t]?/gm,"~0");d=d.replace(/~0/g,"");d=d.replace(/^[ \t]+$/gm,"");d=C(d);d=d.replace(/(^|\n)/g,"$1  ");d=d.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var d;d=b.replace(/^  /mg,"~0");return d=d.replace(/~0/g,"")});return h("<blockquote>\n"+d+"\n</blockquote>")})}function O(a,b){a=a.replace(/^\n+/g,"");
a=a.replace(/\n+$/g,"");for(var d=a.split(/\n{2,}/g),e=[],h=/~K(\d+)K/,c=d.length,f=0;f<c;f++){var g=d[f];h.test(g)?e.push(g):/\S/.test(g)&&(g=k(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",e.push(g))}if(!b)for(c=e.length,f=0;f<c;f++)for(var t=!0;t;)t=!1,e[f]=e[f].replace(/~K(\d+)K/g,function(a,b){t=!0;return J[b]});return e.join("\n\n")}function t(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function r(a,b,d,e){if(b)return a;if(")"!==
e.charAt(e.length-1))return"<"+d+e+">";a=e.match(/[()]/g);for(var h=b=0;h<a.length;h++)"("===a[h]?0>=b?b=1:b++:b--;var c="";0>b&&(e=e.replace(new RegExp("\\){1,"+-b+"}$"),function(a){c=a;return""}));return"<"+d+e+">"+c}function z(a){a=a.replace(/(="|<)?\b(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\])])(?=$|\W)/gi,r);return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(a,b){return'<a href="'+b+'">'+x.plainLinkText(b)+"</a>"})}function w(a){return a=a.replace(/~E(\d+)E/g,
function(a,b){var d=parseInt(b);return String.fromCharCode(d)})}function v(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")}function n(a){if(!/\t/.test(a))return a;var b=["    ","   ","  "," "],d=0,e;return a.replace(/[\n\t]/g,function(a,h){if("\n"===a)return d=h+1,a;e=(h-d)%4;d=h+1;return b[e]})}function P(a){if(!a)return"";var b=a.length;return a.replace(R,function(d,e){return"~D"==d?"%24":":"!=d||e!=b-1&&!/[0-9\/]/.test(a.charAt(e+1))?"%"+d.charCodeAt(0).toString(16):":"})}
function A(a,b,d){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(b="\\\\"+b);return a=a.replace(new RegExp(b,"g"),K)}function K(a,b){return"~E"+b.charCodeAt(0)+"E"}var x=this.hooks=new E;x.addNoop("plainLinkText");x.addNoop("preConversion");x.addNoop("postNormalization");x.addNoop("preBlockGamut");x.addNoop("postBlockGamut");x.addNoop("preSpanGamut");x.addNoop("postSpanGamut");x.addNoop("postConversion");var F,H,J,L;this.makeHtml=function(a){if(F)throw Error("Recursive call to converter.makeHtml");
F=new p;H=new p;J=[];L=0;a=x.preConversion(a);a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=n("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=x.postNormalization(a);a=u(a);a=m(a);a=C(a);a=w(a);a=a.replace(/~D/g,"$$");a=a.replace(/~T/g,"~");a=x.postConversion(a);J=H=F=null;return a};var M=function(a){return C(a)},Q={ol:"\\d+[.]",ul:"[*+-]"},R=/(?:["'*()[\]:]|~D)/g}})();
(function(){function u(){}function G(a){this.buttonBar=l.getElementById("wmd-button-bar"+a);this.preview=l.getElementById("wmd-preview"+a);this.input=l.getElementById("wmd-input"+a)}function E(a,h){var b=this,e=[],d=0,c="none",f,r,l,w=function(a,b){c!=a&&(c=a,b||n());g.isIE&&"moving"==c?l=null:r=setTimeout(v,1)},v=function(a){l=new p(h,a);r=void 0};this.setCommandMode=function(){c="command";n();r=setTimeout(v,0)};this.canUndo=function(){return 1<d};this.canRedo=function(){return e[d+1]?!0:!1};this.undo=
function(){b.canUndo()&&(f?(f.restore(),f=null):(e[d]=new p(h),e[--d].restore(),a&&a()));c="none";h.input.focus();v()};this.redo=function(){b.canRedo()&&(e[++d].restore(),a&&a());c="none";h.input.focus();v()};var n=function(){var b=l||new p(h);if(!b)return!1;"moving"==c?f||(f=b):(f&&(e[d-1].text!=f.text&&(e[d++]=f),f=null),e[d++]=b,e[d+1]=null,a&&a())},m=function(a){var d=!1;if(a.ctrlKey||a.metaKey)switch(String.fromCharCode(a.charCode||a.keyCode)){case "y":b.redo();d=!0;break;case "z":a.shiftKey?
b.redo():b.undo(),d=!0}d&&(a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1))},A=function(a){a.ctrlKey||a.metaKey||(a=a.keyCode,33<=a&&40>=a||63232<=a&&63235>=a?w("moving"):8==a||46==a||127==a?w("deleting"):13==a?w("newlines"):27==a?w("escape"):(16>a||20<a)&&91!=a&&w("typing"))};(function(){k.addEvent(h.input,"keypress",function(a){!a.ctrlKey&&!a.metaKey||89!=a.keyCode&&90!=a.keyCode||a.preventDefault()});var a=function(){(g.isIE||l&&l.text!=h.input.value)&&void 0==
r&&(c="paste",n(),v())};k.addEvent(h.input,"keydown",m);k.addEvent(h.input,"keydown",A);k.addEvent(h.input,"mousedown",function(){w("moving")});h.input.onpaste=a;h.input.ondrop=a})();v(!0);n()}function p(a,h){var b=this,e=a.input;this.init=function(){k.isVisible(e)&&(h||!l.activeElement||l.activeElement===e)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=e.scrollTop,!this.text&&e.selectionStart||0===e.selectionStart)&&(this.text=e.value)};this.setInputAreaSelection=function(){if(k.isVisible(e))if(void 0!==
e.selectionStart&&!g.isOpera)e.focus(),e.selectionStart=b.start,e.selectionEnd=b.end,e.scrollTop=b.scrollTop;else if(l.selection&&(!l.activeElement||l.activeElement===e)){e.focus();var a=e.createTextRange();a.moveStart("character",-e.value.length);a.moveEnd("character",-e.value.length);a.moveEnd("character",b.end);a.moveStart("character",b.start);a.select()}};this.setInputAreaSelectionStartEnd=function(){if(!a.ieCachedRange&&(e.selectionStart||0===e.selectionStart))b.start=e.selectionStart,b.end=
e.selectionEnd;else if(l.selection){b.text=k.fixEolChars(e.value);var d=a.ieCachedRange||l.selection.createRange(),h=k.fixEolChars(d.text),c="\u0007"+h+"\u0007";d.text=c;var f=k.fixEolChars(e.value);d.moveStart("character",-c.length);d.text=h;b.start=f.indexOf("\u0007");b.end=f.lastIndexOf("\u0007")-1;if(c=b.text.length-k.fixEolChars(e.value).length){for(d.moveStart("character",-h.length);c--;)h+="\n",b.end+=1;d.text=h}a.ieCachedRange&&(b.scrollTop=a.ieCachedScrollTop);a.ieCachedRange=null;this.setInputAreaSelection()}};
this.restore=function(){void 0!=b.text&&b.text!=e.value&&(e.value=b.text);this.setInputAreaSelection();e.scrollTop=b.scrollTop};this.getChunks=function(){var a=new u;a.before=k.fixEolChars(b.text.substring(0,b.start));a.startTag="";a.selection=k.fixEolChars(b.text.substring(b.start,b.end));a.endTag="";a.after=k.fixEolChars(b.text.substring(b.end));a.scrollTop=b.scrollTop;return a};this.setChunks=function(a){a.before+=a.startTag;a.after=a.endTag+a.after;this.start=a.before.length;this.end=a.before.length+
a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()}function m(a,h,b){var e,d,c,f=function(){var a=0;window.innerHeight?a=window.pageYOffset:l.documentElement&&l.documentElement.scrollTop?a=l.documentElement.scrollTop:l.body&&(a=l.body.scrollTop);return a},r=function(){if(h.preview){var b=h.input.value;if(!b||b!=c){c=b;var e=(new Date).getTime(),b=a.makeHtml(b);d=(new Date).getTime()-e;x(b)}}},z=function(){e&&(clearTimeout(e),e=void 0);var a=0,a=d;3E3<
a&&(a=3E3);e=setTimeout(r,a)},w=function(a){return a.scrollHeight<=a.clientHeight?1:a.scrollTop/(a.scrollHeight-a.clientHeight)};this.refresh=function(a){a?(c="",r()):z()};this.processingTime=function(){return d};var v=!0,n=function(a){var b=h.preview,d=b.parentNode,e=b.nextSibling;d.removeChild(b);b.innerHTML=a;e?d.insertBefore(b,e):d.appendChild(b)},m=function(a){h.preview.innerHTML=a},A,K=function(a){if(A)return A(a);try{m(a),A=m}catch(b){A=n,A(a)}},x=function(a){var d=B.getTop(h.input)-f();h.preview&&
(K(a),b());h.preview&&(h.preview.scrollTop=(h.preview.scrollHeight-h.preview.clientHeight)*w(h.preview));if(v)v=!1;else{var e=B.getTop(h.input)-f();g.isIE?setTimeout(function(){window.scrollBy(0,e-d)},0):window.scrollBy(0,e-d)}};(function(a,b){k.addEvent(a,"input",b);a.onpaste=b;a.ondrop=b;k.addEvent(a,"keypress",b);k.addEvent(a,"keydown",b)})(h.input,z);r();h.preview&&(h.preview.scrollTop=0)}function I(a,h,b,e,d,f){function t(a){v.focus();if(a.textOp){b&&b.setCommandMode();var d=new p(h);if(!d)return;
var c=d.getChunks(),f=function(){v.focus();c&&d.setChunks(c);d.restore();e.refresh()};a.textOp(c,f)||f()}a.execute&&a.execute(b)}function r(a,b){var d=a.getElementsByTagName("span")[0];b?(d.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){d.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){d.style.backgroundPosition=this.XShift+" 0px"},g.isIE&&(a.onmousedown=function(){l.activeElement&&l.activeElement!==h.input||(h.ieCachedRange=document.selection.createRange(),
h.ieCachedScrollTop=h.input.scrollTop)}),a.isHelp||(a.onclick=function(){if(this.onmouseout)this.onmouseout();t(this);return!1})):(d.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){})}function z(a){"string"===typeof a&&(a=d[a]);return function(){a.apply(d,arguments)}}function w(){b&&(r(n.undo,b.canUndo()),r(n.redo,b.canRedo()))}var v=h.input,n={};(function(){var b=h.buttonBar,d=document.createElement("ul");d.id="wmd-button-row"+a;d.className="wmd-button-row";
var d=b.appendChild(d),e=0,b=function(b,h,c,f){var g=document.createElement("li");g.className="wmd-button";g.style.left=e+"px";e+=25;var t=document.createElement("span");g.id=b+a;g.appendChild(t);g.title=h;g.XShift=c;f&&(g.textOp=f);r(g,!0);d.appendChild(g);return g},g=function(b){var h=document.createElement("li");h.className="wmd-spacer wmd-spacer"+b;h.id="wmd-spacer"+b+a;d.appendChild(h);e+=25};n.bold=b("wmd-bold-button","Stark <strong> Ctrl+B","0px",z("doBold"));n.italic=b("wmd-italic-button",
"Hervorhebung <em> Ctrl+I","-20px",z("doItalic"));g(1);n.link=b("wmd-link-button","Hyperlink <a> Ctrl+L","-40px",z(function(a,b){return this.doLinkOrImage(a,b,!1)}));n.quote=b("wmd-quote-button","Zitat <blockquote> Ctrl+Q","-60px",z("doBlockquote"));n.code=b("wmd-code-button","Code-Schnippsel <pre><code> Ctrl+K","-80px",z("doCode"));n.image=b("wmd-image-button","Bild <img> Ctrl+G","-100px",z(function(a,b){return this.doLinkOrImage(a,b,!0)}));g(2);n.olist=b("wmd-olist-button","Nummerierte Liste <ol> Ctrl+O",
"-120px",z(function(a,b){this.doList(a,b,!0)}));n.ulist=b("wmd-ulist-button","Ungeordnete Liste <ul> Ctrl+U","-140px",z(function(a,b){this.doList(a,b,!1)}));n.heading=b("wmd-heading-button","\u00dcberschrift <h1>/<h2> Ctrl+H","-160px",z("doHeading"));n.hr=b("wmd-hr-button","Trennlinie <hr> Ctrl+R","-180px",z("doHorizontalRule"));g(3);n.undo=b("wmd-undo-button","R\u00fcckg\u00e4ngig - Ctrl+Z","-200px",null);n.undo.execute=function(a){a&&a.undo()};g=/win/.test(c.platform.toLowerCase())?"Wiederholen - Ctrl+Y":
"Wiederholen - Ctrl+Shift+Z";n.redo=b("wmd-redo-button",g,"-220px",null);n.redo.execute=function(a){a&&a.redo()};f&&(b=document.createElement("li"),g=document.createElement("span"),b.appendChild(g),b.className="wmd-button wmd-help-button",b.id="wmd-help-button"+a,b.XShift="-240px",b.isHelp=!0,b.style.right="0px",b.title=f.title||"Hilfe bei der Formattierung",b.onclick=f.handler,r(b,!0),d.appendChild(b),n.help=b);w()})();var m="keydown";g.isOpera&&(m="keypress");k.addEvent(v,m,function(a){if((a.ctrlKey||
a.metaKey)&&!a.altKey&&!a.shiftKey){switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "b":t(n.bold);break;case "i":t(n.italic);break;case "l":t(n.link);break;case "q":t(n.quote);break;case "k":t(n.code);break;case "g":t(n.image);break;case "o":t(n.olist);break;case "u":t(n.ulist);break;case "h":t(n.heading);break;case "r":t(n.hr);break;case "y":t(n.redo);break;case "z":a.shiftKey?t(n.redo):t(n.undo);break;default:return}a.preventDefault&&a.preventDefault();window.event&&(window.event.returnValue=
!1)}});k.addEvent(v,"keyup",function(a){!a.shiftKey||a.ctrlKey||a.metaKey||13!==(a.charCode||a.keyCode)||(a={},a.textOp=z("doAutoindent"),t(a))});g.isIE&&k.addEvent(v,"keydown",function(a){if(27===a.keyCode)return!1});this.setUndoRedoButtonStates=w}function y(a){this.hooks=a}function C(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,b,e){b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g," ")});b=decodeURIComponent(b);b=encodeURI(b).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,
"%29");b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g,"%2b")});e&&(e=e.trim?e.trim():e.replace(/^\s*/,"").replace(/\s*$/,""),e=$.trim(e).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));return e?b+' "'+e+'"':b})}var k={},B={},D={},l=window.document,q=window.RegExp,c=window.navigator,g={isIE:/msie/.test(c.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(c.userAgent.toLowerCase())||/msie 5/.test(c.userAgent.toLowerCase()),isOpera:/opera/.test(c.userAgent.toLowerCase())};
Markdown.Editor=function(a,h,b){h=h||"";var e=this.hooks=new Markdown.HookCollection;e.addNoop("onPreviewRefresh");e.addNoop("postBlockquoteCreation");e.addFalse("insertImageDialog");this.getConverter=function(){return a};var d=this,c;this.run=function(){if(!c){c=new G(h);var f=new y(e),g=new m(a,c,function(){e.onPreviewRefresh()}),k,w;/\?noundo/.test(l.location.href)||(k=new E(function(){g.refresh();w&&w.setUndoRedoButtonStates()},c),this.textOperation=function(a){k.setCommandMode();a();d.refreshPreview()});
w=new I(h,c,k,g,f,b);w.setUndoRedoButtonStates();(d.refreshPreview=function(){g.refresh(!0)})()}}};u.prototype.findTags=function(a,h){var b=this,e;a&&(e=k.extendRegExp(a,"","$"),this.before=this.before.replace(e,function(a){b.startTag+=a;return""}),e=k.extendRegExp(a,"^",""),this.selection=this.selection.replace(e,function(a){b.startTag+=a;return""}));h&&(e=k.extendRegExp(h,"","$"),this.selection=this.selection.replace(e,function(a){b.endTag=a+b.endTag;return""}),e=k.extendRegExp(h,"^",""),this.after=
this.after.replace(e,function(a){b.endTag=a+b.endTag;return""}))};u.prototype.trimWhitespace=function(a){var h,b=this;a?a=h="":(a=function(a){b.before+=a;return""},h=function(a){b.after=a+b.after;return""});this.selection=this.selection.replace(/^(\s*)/,a).replace(/(\s*)$/,h)};u.prototype.skipLines=function(a,h,b){void 0===a&&(a=1);void 0===h&&(h=1);a++;h++;var e,d;navigator.userAgent.match(/Chrome/)&&"X".match(/()./);this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=q.$1;this.selection=
this.selection.replace(/(\n*$)/,"");this.endTag+=q.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=q.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=q.$1;if(this.before){for(e=d="";a--;)e+="\\n?",d+="\n";b&&(e="\\n*");this.before=this.before.replace(new q(e+"$",""),d)}if(this.after){for(e=d="";h--;)e+="\\n?",d+="\n";b&&(e="\\n*");this.after=this.after.replace(new q(e,""),d)}};k.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");
if(a.currentStyle)return"none"!==a.currentStyle.display};k.addEvent=function(a,h,b){a.attachEvent?a.attachEvent("on"+h,b):a.addEventListener(h,b,!1)};k.removeEvent=function(a,h,b){a.detachEvent?a.detachEvent("on"+h,b):a.removeEventListener(h,b,!1)};k.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};k.extendRegExp=function(a,h,b){if(null===h||void 0===h)h="";if(null===b||void 0===b)b="";a=a.toString();var e;a=a.replace(/\/([gim]*)$/,function(a,b){e=b;return""});a=a.replace(/(^\/|\/$)/g,
"");return new q(h+a+b,e)};B.getTop=function(a,h){var b=a.offsetTop;if(!h)for(;a=a.offsetParent;)b+=a.offsetTop;return b};B.getHeight=function(a){return a.offsetHeight||a.scrollHeight};B.getWidth=function(a){return a.offsetWidth||a.scrollWidth};B.getPageSize=function(){var a,h,b,e;self.innerHeight&&self.scrollMaxY?(a=l.body.scrollWidth,h=self.innerHeight+self.scrollMaxY):l.body.scrollHeight>l.body.offsetHeight?(a=l.body.scrollWidth,h=l.body.scrollHeight):(a=l.body.offsetWidth,h=l.body.offsetHeight);
self.innerHeight?(b=self.innerWidth,e=self.innerHeight):l.documentElement&&l.documentElement.clientHeight?(b=l.documentElement.clientWidth,e=l.documentElement.clientHeight):l.body&&(b=l.body.clientWidth,e=l.body.clientHeight);return[Math.max(a,b),Math.max(h,e),b,e]};D.createBackground=function(){var a=l.createElement("div"),h=a.style;a.className="wmd-prompt-background";h.position="absolute";h.top="0";h.zIndex="1000";g.isIE?h.filter="alpha(opacity=50)":h.opacity="0.5";var b=B.getPageSize();h.height=
b[1]+"px";g.isIE?(h.left=l.documentElement.scrollLeft,h.width=l.documentElement.clientWidth):(h.left="0",h.width="100%");l.body.appendChild(a);return a};D.prompt=function(a,h,b,e){var d,c,f,r,m,w;void 0===h&&(h="");var v=function(a){27===(a.charCode||a.keyCode)&&n(!0)},n=function(a){k.removeEvent(l.body,"keydown",v);var e=c.value;a?e=null:(e=e.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(e)||(e="http://"+e));h!==e&&(d.parentNode.removeChild(d),b(e));return!1},q=function(a){m=
a.target.files;return w=u()},p=function(){var a=overlay=document.createElement("div"),b=document.createElement("img");a.style="width:100vw;height:100vh;position:fixed;top:0;left:0;opacity:0.7;background-color:#fff;z-index:2002";b.style="position:fixed;top:50vh;left:50vw";b.src=qa_root+"qa-plugin/markdown-editor/loadingGif.gif";a.appendChild(b);return a},u=function(){var a=!1;if(1<=m.length){var b=r.action,e=new FormData;e.append(f.name,m[0]);var d=p();l.body.appendChild(d);$.ajax({url:b,type:"POST",
data:e,async:!0,success:function(b,e,h){l.body.removeChild(d);e=$(b).filter("blob");b=$(b).filter("error");h=e.text();var f=b.text();1==b.length&&0<f.length?alert(f):1==e.length&&0<h.length?(c.value=h,a=!0):alert("Das Bild konnte nicht hochgeladen werden. Bitte versuchen Sie es sp\u00e4ter erneut.")},error:function(a,b,e){l.body.removeChild(d);a=$(a).filter("error");b=a.text();1==a.length&&0<b.length?alert(b):alert("Das Bild konnte nicht hochgeladen werden. Bitte versuchen Sie es sp\u00e4ter erneut.")},
dataType:"text",cache:!1,contentType:!1,processData:!1})}return a},x=function(){w=!1;d=l.createElement("div");d.className="wmd-prompt-dialog";d.style.padding="10px;";d.style.position="fixed";d.style.width="400px";d.style.zIndex="1001";var b=l.createElement("div");b.innerHTML=a;b.style.padding="5px";d.appendChild(b);r=l.createElement("form");style=r.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";d.appendChild(r);
c=l.createElement("input");c.type="text";c.value=h;style=c.style;style.display="block";style.width="80%";style.marginLeft=style.marginRight="auto";r.appendChild(c);e&&(r.enctype="multipart/form-data",r.action=qa_root+"?qa=markdown-editor-upload",f=l.createElement("input"),f.name="imageUpload",f.type="file",f.accept="image/*",f.id="markdown-editor-image-upload",f.onchange=q,style=f.style,style.display="block",style.width="80%",style.marginLeft=style.marginRight="auto",r.appendChild(f));b=l.createElement("input");
b.type="submit";b.onclick=function(){(!e||0===f.value.length||w||u())&&n(!1);return!1};b.value="OK";style=b.style;style.margin="10px";style.display="inline";style.width="7em";var m=l.createElement("input");m.type="button";m.onclick=function(){return n(!0)};m.value="Cancel";style=m.style;style.margin="10px";style.display="inline";style.width="7em";r.appendChild(b);r.appendChild(m);k.addEvent(l.body,"keydown",v);d.style.top="50%";d.style.left="50%";d.style.display="block";g.isIE_5or6&&(d.style.position=
"absolute",d.style.top=l.documentElement.scrollTop+200+"px",d.style.left="50%");l.body.appendChild(d);d.style.marginTop=-(B.getHeight(d)/2)+"px";d.style.marginLeft=-(B.getWidth(d)/2)+"px"};setTimeout(function(){x();var a=h.length;if(void 0!==c.selectionStart)c.selectionStart=0,c.selectionEnd=a;else if(c.createTextRange){var b=c.createTextRange();b.collapse(!1);b.moveStart("character",-a);b.moveEnd("character",a);b.select()}c.focus()},0)};var f=y.prototype;f.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";
f.unwrap=function(a){var c=new q("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");a.selection=a.selection.replace(c,"$1 $2")};f.wrap=function(a,c){this.unwrap(a);var b=new q("(.{1,"+c+"})( +|$\\n?)","gm"),e=this;a.selection=a.selection.replace(b,function(a,b){return(new q("^"+e.prefixes,"")).test(a)?a:b+"\n"});a.selection=a.selection.replace(/\s+$/,"")};f.doBold=function(a,c){return this.doBorI(a,c,2,"strong text")};f.doItalic=function(a,c){return this.doBorI(a,c,1,"emphasized text")};f.doBorI=function(a,
c,b,e){a.trimWhitespace();a.selection=a.selection.replace(/\n{2,}/g,"\n");var d=/(\**$)/.exec(a.before)[0];c=/(^\**)/.exec(a.after)[0];d=Math.min(d.length,c.length);d>=b&&(2!=d||1!=b)?(a.before=a.before.replace(q("[*]{"+b+"}$",""),""),a.after=a.after.replace(q("^[*]{"+b+"}",""),"")):!a.selection&&c?(a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,""),a.before=a.before+c+q.$1):(a.selection||c||(a.selection=e),b=1>=b?"*":"**",a.before+=b,a.after=b+a.after)};f.stripLinkDefs=
function(a,c){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,e,d,f,g){c[e]=a.replace(/\s*$/,"");return f?(c[e]=a.replace(/["(](.+?)[")]$/,""),f+g):""})};f.addLinkDef=function(a,c){var b=0,e={};a.before=this.stripLinkDefs(a.before,e);a.selection=this.stripLinkDefs(a.selection,e);a.after=this.stripLinkDefs(a.after,e);var d="",f=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,g=function(a){b++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,
"  ["+b+"]:");d+="\n"+a},l=function(a,c,d,h,k,m){d=d.replace(f,l);return e[k]?(g(e[k]),c+d+h+b+m):a};a.before=a.before.replace(f,l);c?g(c):a.selection=a.selection.replace(f,l);var k=b;a.after=a.after.replace(f,l);a.after&&(a.after=a.after.replace(/\n*$/,""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+d;return k};f.doLinkOrImage=function(a,c,b){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var e;if(1<a.endTag.length&&0<a.startTag.length)a.startTag=
a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null);else if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))this.addLinkDef(a,null);else{var d=this,f=function(f){e.parentNode.removeChild(e);null!==f&&(a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),f=" [999]: "+C(f),f=d.addLinkDef(a,f),a.startTag=b?"![":"[",a.endTag="]["+f+"]",a.selection||(a.selection=b?"enter image description here":"enter link description here"));
c()};e=D.createBackground();b?this.hooks.insertImageDialog(f)||D.prompt('<h3 style="margin-top:0">Bitte geben Sie eine URL ein oder laden ein Bild hoch.</h3>',"http://",f,!0):D.prompt('<h3 style="margin-top:0">Bitte geben Sie die Webadresse ein.</h3>',"http://",f);return!0}};f.doAutoindent=function(a,c){var b=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");
a.selection||/^[ \t]*(?:\n|$)/.test(a.after)||(a.after=a.after.replace(/^[^\n]*/,function(b){a.selection=b;return""}),b=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&this.doList&&this.doList(a);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&this.doBlockquote&&this.doBlockquote(a);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&this.doCode&&this.doCode(a);b&&(a.after=a.selection+a.after,a.selection="")};f.doBlockquote=function(a,c){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,
c,e,d){a.before+=c;a.after=d+a.after;return e});a.before=a.before.replace(/(>[ \t]*)$/,function(b,c){a.selection=c+a.selection;return""});a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||"Blockquote";var b="",e="",d;if(a.before){for(var f=a.before.replace(/\n$/,"").split("\n"),g=!1,l=0;l<f.length;l++){var k=!1;d=f[l];g=g&&0<d.length;/^>/.test(d)?(k=!0,!g&&1<d.length&&(g=!0)):k=/^[ \t]*$/.test(d)?!0:g;k?b+=d+"\n":(e+=b+d,b="\n")}/(^|\n)>/.test(b)||(e+=b,b="")}a.startTag=b;a.before=
e;a.after&&(a.after=a.after.replace(/^\n?/,"\n"));a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){a.endTag=b;return""});b=function(b){var c=b?"> ":"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}));a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(this.wrap(a,70),a.selection=
a.selection.replace(/^/gm,"> "),b(!0),a.skipLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),b(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n")));a.selection=this.hooks.postBlockquoteCreation(a.selection);/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){a.startTag+=c;return""}))};f.doCode=
function(a,c){var b=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&!b||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){a.selection=b+a.selection;return""});var e=b=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(b=0);/^\n(\t|[ ]{4,})/.test(a.after)&&(e=0);a.skipLines(b,e);a.selection?/^[ ]{0,3}\S/m.test(a.selection)?/\n/.test(a.selection)?a.selection=a.selection.replace(/^/gm,"    "):a.before+="    ":a.selection=a.selection.replace(/^[ ]{4}/gm,""):(a.startTag="    ",a.selection=
"enter code here")}else a.trimWhitespace(),a.findTags(/`/,/`/),a.startTag||a.endTag?a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag="":(a.startTag=a.endTag="`",a.selection||(a.selection="enter code here"))};f.doList=function(a,c,b){c=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var e="-",d=1,f=function(){var a;b?(a=" "+d+". ",d++):a=" "+e+" ";return a},g=function(a){void 0===b&&(b=/^\s*\d/.test(a));return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,
function(a){return f()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);!a.before||/\n$/.test(a.before)||/^\n/.test(a.startTag)||(a.before+=a.startTag,a.startTag="");if(a.startTag){var l=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(a);a.skipLines();l&&(a.after=a.after.replace(c,g));if(b==l)return}var k=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(a){/^\s*([*+-])/.test(a)&&
(e=q.$1);k=/[^\n]\n\n[^\n]/.test(a)?1:0;return g(a)});a.selection||(a.selection="List item");var l=f(),m=1;a.after=a.after.replace(c,function(a){m=/[^\n]\n\n[^\n]/.test(a)?1:0;return g(a)});a.trimWhitespace(!0);a.skipLines(k,m,!0);a.startTag=l;c=l.replace(/./g," ");this.wrap(a,72-c.length);a.selection=a.selection.replace(/\n/g,"\n"+c)};f.doHeading=function(a,c){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,"");if(a.selection){var b=0;a.findTags(/#+[ ]*/,
/[ ]*#+/);/#+/.test(a.startTag)&&(b=q.lastMatch.length);a.startTag=a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(b=1);/-+/.test(a.endTag)&&(b=2);a.startTag=a.endTag="";a.skipLines(1,1);b=0==b?2:b-1;if(0<b){var b=2<=b?"-":"=",e=a.selection.length;72<e&&(e=72);for(a.endTag="\n";e--;)a.endTag+=b}}else a.startTag="## ",a.selection="Heading",a.endTag=" ##"};f.doHorizontalRule=function(a,c){a.startTag="----------\n";a.selection="";a.skipLines(2,1,!0)}})();
(function(){function u(k){return k.replace(/<[^>]*>?/gi,G)}function G(k){return k.match(I)||k.match(y)||k.match(C)?k:""}function E(k){if(""==k)return"";var m=/<\/?\w+[^>]*(\s|$|>)/g,p=k.toLowerCase().match(m),l=(p||[]).length;if(0==l)return k;for(var q,c,g,f=[],a=[],h=!1,b=0;b<l;b++)if(q=p[b].replace(/<\/?(\w+).*/,"$1"),!(f[b]||-1<"<p><img><br><li><hr>".search("<"+q+">"))){c=p[b];g=-1;if(!/^<\//.test(c))for(c=b+1;c<l;c++)if(!f[c]&&p[c]=="</"+q+">"){g=c;break}-1==g?h=a[b]=!0:f[g]=!0}if(!h)return k;
b=0;return k=k.replace(m,function(c){c=a[b]?"":c;b++;return c})}var p,m;"object"===typeof exports&&"function"===typeof require?(p=exports,m=require("./Markdown.Converter").Converter):(p=window.Markdown,m=p.Converter);p.getSanitizingConverter=function(){var k=new m;k.hooks.chain("postConversion",u);k.hooks.chain("postConversion",E);return k};var I=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,y=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,
C=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i})();
(function(){function u(c){return c.replace(/^\s+|\s+$/g,"")}function G(c,g){return c.replace(/<[^>]*>?/gi,function(c){return c.match(g)?c:""})}function E(c){"\u0002"!=c.charAt(0)&&(c="\u0002"+c);"\u0003"!=c.charAt(c.length-1)&&(c+="\u0003");return c}function p(c){"\u0002"==c.charAt(0)&&(c=c.substr(1));"\u0003"==c.charAt(c.length-1)&&(c=c.substr(0,c.length-1));return c}function m(c,g){return G(I(c,g),B)}function I(c,g){var f=g.blockGamutHookCallback(c),f=y(f),f=f.replace(/~D/g,"$$").replace(/~T/g,
"~");return f=g.previousPostConversion(f)}function y(c){return c=c.replace(/~E(\d+)E/g,function(c,f){var a=parseInt(f);return String.fromCharCode(a)})}function C(c){return c.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function k(c,g){var f;f=g.replace(/&\#8220;/g,'"');f=f.replace(/&\#8221;/g,'"');f=f.replace(/&\#8216;/g,"'");f=f.replace(/&\#8217;/g,"'");f=f.replace(/&\#8212;/g,"---");f=f.replace(/&\#8211;/g,"--");return f=f.replace(/&\#8230;/g,
"...")}var B=/^(<\/?(a|abbr|acronym|applet|area|b|basefont|bdo|big|button|cite|code|del|dfn|em|figcaption|font|i|iframe|img|input|ins|kbd|label|map|mark|meter|object|param|progress|q|ruby|rp|rt|s|samp|script|select|small|span|strike|strong|sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|<(br)\s?\/?>)$/i;Array.indexOf||(Array.prototype.indexOf=function(c){for(var g=0;g<this.length;g++)if(this[g]==c)return g;return-1});Markdown.Extra=function(){this.converter=null;this.hashBlocks=[];this.footnotes={};this.usedFootnotes=
[];this.highlightJs=this.googleCodePrettify=this.attributeBlocks=!1;this.tableClass="";this.tabWidth=4};Markdown.Extra.init=function(c,g){var f=new Markdown.Extra,a=[],h=[],b=[],e=["unHashExtraBlocks"];g=g||{};g.extensions=g.extensions||["all"];-1!=g.extensions.indexOf("all")&&(g.extensions="tables fenced_code_gfm def_list attr_list footnotes smartypants strikethrough newlines".split(" "));h.push("wrapHeaders");-1!=g.extensions.indexOf("attr_list")&&(a.push("hashFcbAttributeBlocks"),h.push("hashHeaderAttributeBlocks"),
e.push("applyAttributeBlocks"),f.attributeBlocks=!0);-1!=g.extensions.indexOf("fenced_code_gfm")&&(h.push("fencedCodeBlocks"),a.push("fencedCodeBlocks"));-1!=g.extensions.indexOf("tables")&&h.push("tables");-1!=g.extensions.indexOf("def_list")&&h.push("definitionLists");-1!=g.extensions.indexOf("footnotes")&&(a.push("stripFootnoteDefinitions"),h.push("doFootnotes"),e.push("printFootnotes"));-1!=g.extensions.indexOf("smartypants")&&e.push("runSmartyPants");-1!=g.extensions.indexOf("strikethrough")&&
b.push("strikethrough");-1!=g.extensions.indexOf("newlines")&&b.push("newlines");c.hooks.chain("postNormalization",function(b){return f.doTransform(a,b)+"\n"});c.hooks.chain("preBlockGamut",function(a,b){f.blockGamutHookCallback=b;a=a.replace(/\\\|/g,"~I").replace(/\\:/g,"~i");a=f.doTransform(h,a)+"\n";return a=a.replace(/~I/g,"|").replace(/~i/g,":")});c.hooks.chain("postSpanGamut",function(a){return f.doTransform(b,a)});f.previousPostConversion=c.hooks.postConversion;c.hooks.chain("postConversion",
function(a){a=f.doTransform(e,a);f.hashBlocks=[];f.footnotes={};f.usedFootnotes=[];return a});"highlighter"in g&&(f.googleCodePrettify="prettify"===g.highlighter,f.highlightJs="highlight"===g.highlighter);"table_class"in g&&(f.tableClass=g.table_class);f.converter=c;return f};Markdown.Extra.prototype.doTransform=function(c,g){for(var f=0;f<c.length;f++)g=this[c[f]](g);return g};Markdown.Extra.prototype.hashExtraBlock=function(c){return"\n<p>~X"+(this.hashBlocks.push(c)-1)+"X</p>\n"};Markdown.Extra.prototype.hashExtraInline=
function(c){return"~X"+(this.hashBlocks.push(c)-1)+"X"};Markdown.Extra.prototype.unHashExtraBlocks=function(c){function g(){var a=!1;c=c.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(c,b){a=!0;var e=parseInt(b,10);return f.hashBlocks[e]});!0===a&&g()}var f=this;g();return c};Markdown.Extra.prototype.wrapHeaders=function(c){function g(c){return"\n"+c+"\n"}c=c.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,g);c=c.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,g);return c=c.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,g)};var D=
RegExp("^(#{1,6}.*#{0,6})[ \\t]+\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}[ \\t]*(?:\\n|0x03)","gm"),l=RegExp("^(.*)[ \\t]+\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),q=RegExp("^(```[^`\\n]*)[ \\t]+\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");Markdown.Extra.prototype.hashHeaderAttributeBlocks=function(c){function g(a,c,b){return"<p>~XX"+(f.hashBlocks.push(b)-1)+"XX</p>\n"+c+"\n"}var f=this;
c=c.replace(D,g);return c=c.replace(l,g)};Markdown.Extra.prototype.hashFcbAttributeBlocks=function(c){var g=this;return c.replace(q,function(c,a,h){return"<p>~XX"+(g.hashBlocks.push(h)-1)+"XX</p>\n"+a+"\n"})};Markdown.Extra.prototype.applyAttributeBlocks=function(c){var g=this;return c=c.replace(RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm"),function(c,a,h,b,e){if(!h)return"";c=parseInt(a,10);a=g.hashBlocks[c];c=a.match(/#[^\s#.]+/g)||[];c=c[0]?' id="'+
c[0].substr(1,c[0].length-1)+'"':"";var d=a.match(/\.[^\s#.]+/g)||[];for(a=0;a<d.length;a++)d[a]=d[a].substr(1,d[a].length-1);a="";if(b){var l=[b];b={};for(var k=0;k<d.length;k++)b[d[k]]=d[k];for(k=0;k<l.length;k++)b[l[k]]=l[k];var d=[],m;for(m in b)b.hasOwnProperty(m)&&d.push(b[m])}0<d.length&&(a=' class="'+d.join(" ")+'"');return"<"+h+c+a+e})};Markdown.Extra.prototype.tables=function(c){function g(a,b,c,d,g,k){b=b.replace(/^ *[|]/m,"");c=c.replace(/^ *[|]/m,"");d=d.replace(/^ *[|]/gm,"");b=b.replace(/[|] *$/m,
"");c=c.replace(/[|] *$/m,"");d=d.replace(/[|] *$/gm,"");g=c.split(/ *[|] */);a=[];for(c=0;c<g.length;c++)k=g[c],k.match(/^ *-+: *$/m)?a[c]=' align="right"':k.match(/^ *:-+: *$/m)?a[c]=' align="center"':k.match(/^ *:-+ *$/m)?a[c]=' align="left"':a[c]="";k=b.split(/ *[|] */);b=k.length;g=["<table",f.tableClass?' class="'+f.tableClass+'"':"",">\n<thead>\n<tr>\n"].join("");for(c=0;c<b;c++){var l=m(u(k[c]),f);g+=["  <th",a[c],">",l,"</th>\n"].join("")}g+="</tr>\n</thead>\n";d=d.split("\n");for(c=0;c<
d.length;c++)if(!d[c].match(/^\s*$/)){k=d[c].split(/ *[|] */);for(var p=b-k.length,l=0;l<p;l++)k.push("");g+="<tr>\n";for(l=0;l<b;l++)p=m(u(k[l]),f),g+=["  <td",a[l],">",p,"</td>\n"].join("");g+="</tr>\n"}return f.hashExtraBlock(g+"</table>\n")}var f=this,a=RegExp("^[ ]{0,3}(\\S.*[|].*)\\n[ ]{0,3}([-:]+[ ]*[|][-| :]*)\\n((?:.*[|].*\\n?)*)(?:\\n|$)","gm");c=c.replace(RegExp("^[ ]{0,3}[|](.+)\\n[ ]{0,3}[|]([ ]*[-:]+[-| :]*)\\n((?:[ ]*[|].*\\n?)*)(?:\\n|$)","gm"),g);return c=c.replace(a,g)};Markdown.Extra.prototype.stripFootnoteDefinitions=
function(c){var g=this;return c=c.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(c,a,h){a=C(a);h=(h+"\n").replace(/^[ ]{0,3}/g,"");g.footnotes[a]=h;return"\n"})};Markdown.Extra.prototype.doFootnotes=function(c){var g=this;if(!0===g.isConvertingFootnote)return c;var f=0;return c=c.replace(/\[\^(.+?)\]/g,function(a,c){var b=C(c);if(void 0===g.footnotes[b])return a;f++;g.usedFootnotes.push(b);return g.hashExtraInline('<a href="#fn:'+b+'" id="fnref:'+b+'" title="See footnote" class="footnote">'+
f+"</a>")})};Markdown.Extra.prototype.printFootnotes=function(c){if(0===this.usedFootnotes.length)return c;c+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var g=0;g<this.usedFootnotes.length;g++){var f=this.usedFootnotes[g],a=this.footnotes[f];this.isConvertingFootnote=!0;a=m(a,this);delete this.isConvertingFootnote;c+='<li id="fn:'+f+'">'+a+' <a href="#fnref:'+f+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return c+"</ol>\n</div>"};Markdown.Extra.prototype.fencedCodeBlocks=
function(c){function g(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/~D/g,"$$");return a=a.replace(/~T/g,"~")}var f=this;return c=c.replace(/(?:^|\n)```([^`\n]*)\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(a,c,b){a=u(c);c=f.googleCodePrettify?' class="prettyprint"':"";var e="";a&&(e=f.googleCodePrettify||f.highlightJs?' class="language-'+a+'"':' class="'+a+'"');b=["<pre",c,"><code",e,">",g(b),"</code></pre>"].join("");return f.hashExtraBlock(b)})};Markdown.Extra.prototype.educatePants=
function(c){var g=this,f="",a=0;c.replace(/(?:\x3c!--[\s\S]*?--\x3e)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(b,e,d,h,k,l,m){var p=c.substring(a,m);f+=g.applyPants(p);g.smartyPantsLastChar=f.substring(f.length-1);a=m+b.length;e?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(d)?g.smartyPantsLastChar=k.substring(k.length-1):k=g.educatePants(k),f+=e+d+h+k+l):f+=b});var h=c.substring(a),f=f+g.applyPants(h);g.smartyPantsLastChar=f.substring(f.length-1);return f};Markdown.Extra.prototype.applyPants=
function(c){c=c.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;");c=c.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;");c=c.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;");if(/^'$/.test(c))return/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;";if(/^"$/.test(c))return/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;";c=c.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;");c=c.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;");c=c.replace(/"'(?=\w)/g,
"&#8220;&#8216;");c=c.replace(/'"(?=\w)/g,"&#8216;&#8220;");c=c.replace(/'(?=\d{2}s)/g,"&#8217;");c=c.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;");c=c.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;");c=c.replace(/'(?=\s|s\b)/g,"&#8217;");c=c.replace(/'/g,"&#8216;");c=c.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;");c=c.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;");c=c.replace(/"(?=\s)/g,"&#8221;");return c=c.replace(/"/ig,"&#8220;")};
Markdown.Extra.prototype.runSmartyPants=function(c){this.smartyPantsLastChar="";c=this.educatePants(c);return c=c.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,k)};Markdown.Extra.prototype.definitionLists=function(c){var g=RegExp("(\\x02\\n?|\\n\\n)(?:(([ ]{0,3}((?:[ \\t]*\\S.*\\n)+)\\n?[ ]{0,3}:[ ]+)([\\s\\S]+?)((?=\\0x03)|(?=\\n{2,}(?=\\S)(?![ ]{0,3}(?:\\S.*\\n)+?\\n?[ ]{0,3}:[ ]+)(?![ ]{0,3}:[ ]+)))))","gm"),f=this;c=E(c);c=c.replace(g,function(a,c,b){a=u(f.processDefListItems(b));return c+f.hashExtraBlock("<dl>\n"+
a+"\n</dl>")+"\n\n"});return p(c)};Markdown.Extra.prototype.processDefListItems=function(c){var g=this,f=RegExp("(\\x02\\n?|\\n\\n+)([ ]{0,3}(?![:][ ]|[ ])(?:\\S.*\\n)+?)(?=\\n?[ ]{0,3}:[ ])","gm"),a=RegExp("\\n(\\n+)?([ ]{0,3}[:][ ]+)([\\s\\S]+?)(?=\\n*(?:\\n[ ]{0,3}[:][ ]|<dt>|\\x03))","gm");c=E(c);c=c.replace(/\n{2,}(?=\\x03)/,"\n");c=c.replace(f,function(a,b,c){a=u(c).split("\n");b="";for(c=0;c<a.length;c++){var d=a[c],d=m(u(d),g);b+="\n<dt>"+d+"</dt>"}return b+"\n"});c=c.replace(a,function(a,
b,c,d){b||d.match(/\n{2,}/)?(d=Array(c.length+1).join(" ")+d,d=d.replace(RegExp("^(\\t|[ ]{1,4})","gm"),"")+"\n\n",d="\n"+I(d,g)+"\n"):(d=d.replace(/\s+$/g,""),d=m(d.replace(RegExp("^(\\t|[ ]{1,4})","gm"),""),g));return"\n<dd>"+d+"</dd>\n"});return p(c)};Markdown.Extra.prototype.strikethrough=function(c){return c.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")};Markdown.Extra.prototype.newlines=function(c){return c.replace(/(<(?:br|\/li)>)?\n/g,function(c,f){return f?
c:" <br>\n"})}})();
